<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>EMOTABI - 感情と旅が交わる場所</title>
  <meta name="description" content="写真から感情を読み取り、あなたの心に響く旅先を提案します。感情と旅が交わる新しい体験を始めましょう。">
  
  <!-- Google Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Serif+JP:wght@200;300;400;500;600;700&family=Noto+Sans+JP:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  
  <link rel="stylesheet" href="{{ url_for('static', filename='css/styles.css') }}">
  
  <script>
    window.PLACEHOLDER_IMG = "{{ url_for('static', filename='images/placeholder_r1.png') }}";
  </script>
</head>
<body>

  <!-- ナビゲーション -->
  <nav class="nav">
    <div class="nav-container">
      <div class="nav-logo">
        <span class="logo-text">EMOTABI</span>
        <span class="logo-subtitle">感情と旅が交わる場所</span>
      </div>
      
      <!-- モバイルナビゲーション用トグルボタン -->
      <button class="nav-toggle" aria-label="メニューを開く">
        <span></span>
        <span></span>
        <span></span>
      </button>
      
      <div class="nav-menu">
        <a href="#story" class="nav-link" data-i18n>EMOTABIとは</a>
        <a href="#experience" class="nav-link" data-i18n>感情分析</a>
        <a href="#journey" class="nav-link" data-i18n>旅を始める</a>
        
        <!-- 言語切り替えボタン -->
        <div class="lang-switcher">
          <button class="lang-btn" data-lang="ja" onclick="i18n.setLocale('ja')">
            🇯🇵
          </button>
          <button class="lang-btn" data-lang="en" onclick="i18n.setLocale('en')">
            🇺🇸
          </button>
        </div>
      </div>
    </div>
  </nav>

  <!-- メインビジュアル -->
  <section class="hero">
    <div class="hero-bg">
      <div class="hero-overlay"></div>
      <img src="{{ url_for('static', filename='images/hero-banner.jpg') }}" alt="那須高原の風景" class="hero-image">
    </div>
    <div class="hero-content">
      <div class="hero-text">
        <h1 class="hero-title">
          <span class="hero-title-main">EMOTABI</span>
          <span class="hero-title-sub" data-i18n>感情と旅が交わる場所</span>
        </h1>
        <p class="hero-description" data-i18n>
          写真から感情を読み取り、あなたの心に響く旅先を提案します。<br>
          感情と旅が交わる新しい体験を始めましょう。
        </p>

      </div>
    </div>
  </section>

  <!-- ストーリー -->
  <section class="story" id="story">
    <div class="container">
      <div class="story-content">
        <div class="story-text">
          <h2 class="section-title">
            <span class="section-title-main">STORY</span>
            <span class="section-title-sub" data-i18n>感情があなたの旅を導く</span>
          </h2>
          <div class="story-description">
            <p>
              <span data-i18n>旅の本質は、その瞬間のあなたの感情と心の状態にあります。</span><br>
              <span data-i18n>美しい風景、新しい出会い、美味しい食事、そして心に残る体験。</span>
            </p>
            <p data-i18n>
              EMOTABIは、写真の「色彩」「物体」「雰囲気」から感情を分析し、あなたが選んだ地域の中から、その時の心に寄り添う旅先を提案します。
            </p>
            <p>
              <span data-i18n>感情の数だけ出会いと旅がある。</span><br>
              <span data-i18n>今日のあなたにぴったりの旅を見つけてみませんか。</span>
            </p>
          </div>
        </div>
        <div class="story-visual">
          <div class="story-image-container">
            <div class="story-slideshow">
              <img src="{{ url_for('static', filename='images/about1.jpg') }}" alt="旅の風景" class="story-image active">
              <img src="{{ url_for('static', filename='images/about2.jpg') }}" alt="旅の風景" class="story-image">
              <img src="{{ url_for('static', filename='images/about3.jpg') }}" alt="旅の風景" class="story-image">
            </div>
            <div class="story-image-overlay">
              <span class="story-image-text">感情の旅</span>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- 体験 -->
  <section class="experience" id="experience">
    <div class="container">
      <h2 class="section-title center">
        <span class="section-title-main">EXPERIENCE</span>
        <span class="section-title-sub" data-i18n>3つの感情分析</span>
      </h2>
      
      <div class="experience-grid">
        <div class="experience-item">
          <div class="experience-icon">
            <div class="icon-circle">
              <svg width="32" height="32" viewBox="0 0 32 32" fill="none">
                <path d="M16 4C9.373 4 4 9.373 4 16s5.373 12 12 12 12-5.373 12-12S22.627 4 16 4z" fill="currentColor"/>
              </svg>
            </div>
          </div>
          <h3 class="experience-title" data-i18n>色彩感情</h3>
          <p class="experience-description">
            <span data-i18n>写真の色彩から連想される</span><br>
            <span data-i18n>感情を読み取ります</span>
          </p>
        </div>
        
        <div class="experience-item">
          <div class="experience-icon">
            <div class="icon-circle">
              <svg width="32" height="32" viewBox="0 0 32 32" fill="none">
                <path d="M8 8h16v16H8V8z" fill="currentColor"/>
              </svg>
            </div>
          </div>
          <h3 class="experience-title" data-i18n>物体感情</h3>
          <p class="experience-description">
            <span data-i18n>写真に写る物体から</span><br>
            <span data-i18n>感情の方向性を分析します</span>
          </p>
        </div>
        
        <div class="experience-item">
          <div class="experience-icon">
            <div class="icon-circle">
              <svg width="32" height="32" viewBox="0 0 32 32" fill="none">
                <path d="M16 2L20 12h10l-8 6 3 10-9-7-9 7 3-10-8-6h10z" fill="currentColor"/>
              </svg>
            </div>
          </div>
          <h3 class="experience-title" data-i18n>雰囲気感情</h3>
          <p class="experience-description">
            <span data-i18n>写真全体の雰囲気から</span><br>
            <span data-i18n>深層心理を読み解きます</span>
          </p>
        </div>
      </div>
    </div>
  </section>

  <!-- 旅の始まり -->
  <section class="journey" id="journey">
    <div class="container">
      <h2 class="section-title center">
        <span class="section-title-main">JOURNEY</span>
        <span class="section-title-sub" data-i18n>さあ、あなたの旅を始めましょう</span>
      </h2>
      
      <div class="journey-form">
        <form id="analyze-form" enctype="multipart/form-data">
          <div class="form-row">
            <div class="form-group">
              <label class="form-label">
                <span class="icon">🗺️</span>
                <span data-i18n>探したい地域</span>
                <span style="color: #e74c3c; margin-left: 4px;">*</span>
              </label>
              <select id="region-select" name="region" class="form-select" required>
                <option value="" data-i18n>-- 地域を選択してください --</option>
                <option value="hokkaido" data-i18n>北海道</option>
                <option value="tokyo" data-i18n>東京</option>
                <option value="nagoya" data-i18n>名古屋</option>
                <option value="kyoto" data-i18n>京都</option>
                <option value="osaka" data-i18n>大阪</option>
                <option value="fukuoka" data-i18n>福岡</option>
                <option value="custom" data-i18n>その他（自分で入力）</option>
              </select>
              <input type="text" id="region-custom" name="region_custom" class="form-input hidden" placeholder="地域名を入力してください（例：沖縄、京都、札幌）" data-i18n-placeholder="地域名を入力してください" style="margin-top: 12px;">
            </div>
          </div>
          
          <div class="form-row">
            <div class="form-group">
              <label class="form-label" data-i18n>旅行目的</label>
              <select id="purpose" name="purpose" class="form-select" required>
                <option value="" disabled selected data-i18n>目的を選択</option>
                <option data-i18n>自然・絶景</option>
                <option data-i18n>歴史・文化</option>
                <option data-i18n>アート・ミュージアム</option>
                <option data-i18n>動物・牧場</option>
                <option data-i18n>レジャー</option>
                <option data-i18n>食事</option>
                <option data-i18n>買い物</option>
                <option data-i18n>温泉</option>
                <option data-i18n>自分で入力</option>
              </select>
              <input type="text" id="purpose-other" name="purpose_other" class="form-input hidden" placeholder="目的を入力してください" data-i18n>
            </div>
          </div>
          
          <div class="form-upload">
            <label class="form-label" data-i18n>あなたの今の気持ちを表す写真をアップロード</label>
            <div class="upload-area">
              <input type="file" id="image" name="image" accept="image/*" class="upload-input" required style="display: none;">
              <label for="image" class="upload-content">
                <div class="upload-icon">
                  <svg width="48" height="48" viewBox="0 0 48 48" fill="none">
                    <path d="M24 16V32M16 24H32" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                    <rect x="4" y="4" width="40" height="40" rx="8" stroke="currentColor" stroke-width="2" fill="none"/>
                  </svg>
                </div>
                <p class="upload-text">写真をドラッグ&ドロップ<br>またはクリックして選択</p>
              </label>
              <div class="upload-preview hidden">
                <img class="preview-image" alt="プレビュー">
                <div class="preview-overlay">
                  <button type="button" class="preview-remove">×</button>
                </div>
              </div>
            </div>
          </div>
          
          <div class="form-submit">
            <button type="submit" class="submit-button">
              <span class="submit-text" data-i18n>感情分析を開始</span>
              <div class="submit-arrow">→</div>
            </button>
          </div>
        </form>
      </div>
    </div>
  </section>

  <!-- 色彩感情選択セクション -->
  <section class="color-selection hidden" id="color-selection">
    <div class="container">
      <h2 class="section-title center">
        <span class="section-title-main">COLOR EMOTION</span>
        <span class="section-title-sub" data-i18n>色彩感情を選択してください</span>
      </h2>
      
      <div class="selection-info">
        <p class="selection-description" data-i18n>
          画像から抽出された色彩感情の候補です。<br>
          写真から感じる感情に最も近いものを選択してください。
        </p>
        
        <!-- 共通カラーパレット表示エリア -->
        <div class="color-palette-display" id="color-palette-display">
          <!-- JavaScriptで動的に挿入される -->
        </div>
      </div>
      
      <div class="color-candidates" id="color-candidates">
        <!-- 動的にボタンが挿入される -->
      </div>
    </div>
  </section>

  <!-- 結果セクション -->
  <section class="results hidden" id="results">
    <div class="container">
      <h2 class="section-title center">
        <span class="section-title-main">RESULT</span>
        <span class="section-title-sub" data-i18n>あなたの感情分析結果</span>
      </h2>
      
      <div class="emotion-analysis">
        <div class="emotion-item">
          <div class="emotion-label" data-i18n>色彩感情</div>
          <div class="emotion-value" id="color-emotion">-</div>
          
        </div>
        <div class="emotion-item">
          <div class="emotion-label" data-i18n>物体感情</div>
          <div class="emotion-value" id="object-emotion">-</div>
          
        </div>
        <div class="emotion-item">
          <div class="emotion-label" data-i18n>雰囲気感情</div>
          <div class="emotion-value" id="atmosphere-emotion">-</div>
          
        </div>
      </div>
      
      <div class="recommendations">
        <h3 class="recommendations-title" data-i18n>あなたにおすすめの旅先</h3>
        <div class="recommendations-grid" id="suggestions-list">
          <!-- 動的にカードが挿入される -->
        </div>
      </div>
      
      <!-- シンプルなアンケートリンク -->
      <div class="survey-simple" style="text-align:center; margin: 32px 0;">
        <a href="https://forms.gle/Hc5Emtz2hJH6WMT78" target="_blank" rel="noopener" class="survey-button" style="display:inline-block; padding:12px 20px; border-radius:8px; background:#6b8e3d; color:#fff; text-decoration:none; font-weight:600;">
          <span data-i18n>アンケートに回答する（外部フォームが開きます）</span>
        </a>
      </div>
    </div>
  </section>

  

  <!-- フッター -->
  <footer class="footer">
    <div class="container">
      <div class="footer-content">
        <div class="footer-logo">
          <span class="logo-text">EMOTABI</span>
          <span class="logo-subtitle">感情と旅が交わる場所</span>
        </div>
        <div class="footer-info">
          <p>感情分析型観光案内サイト</p>
          <p>開発・提供：芝浦工業大学 最適システムデザイン研究室</p>
          <p>© 2024 EMOTABI. All rights reserved.</p>
        </div>
      </div>
    </div>
  </footer>

  <!-- アンケート誘導バナー -->
  <div class="survey-notification hidden" id="survey-notification">
    <div class="notification-content">
      <span class="notification-text"> 分析結果はいかがでしたか？アンケートにもご協力ください！</span>
      <button class="notification-button" onclick="scrollToSurvey()">アンケートへ</button>
      <button class="notification-close" onclick="closeSurveyNotification()">×</button>
    </div>
  </div>

  <!-- ローディング -->
  <div class="loading-overlay">
    <div class="loading-content">
      <div class="loading-spinner"></div>
      <div class="loading-text" data-i18n>感情を分析しています...</div>
    </div>
  </div>

  <!-- 多言語対応スクリプト -->
  <script src="{{ url_for('static', filename='js/i18n.js') }}"></script>
  
  <!-- メインスクリプト -->
  <script src="{{ url_for('static', filename='js/script.js') }}"></script>
</body>
</html>
